  </div>
</div>

</div>

<script>

// PASSWORD
const PASSWORD_TEXT="buffpigeon";
let pa=Math.floor(Math.random()*20)+5;
let pb=Math.floor(Math.random()*20)+5;
let PASSWORD_MATH=pa+pb;

const terminal=document.getElementById("terminal");
const pwInput=document.getElementById("passwordInput");
const gameInput=document.getElementById("gameInput");
const gameContent=document.getElementById("gameContent");

function type(msg){
  let p=document.createElement("p");
  terminal.appendChild(p);
  p.textContent=msg;
  terminal.scrollTop=terminal.scrollHeight;
}

type("> Enter password:");
type("> '"+PASSWORD_TEXT+"' OR solve: "+pa+" + "+pb);

pwInput.addEventListener("keydown",function(e){
if(e.key==="Enter"){
e.preventDefault();
let val=this.value.trim();
if(val===PASSWORD_TEXT || Number(val)===PASSWORD_MATH){
  type("‚úÖ Access granted.");
  pwInput.style.display="none";
  gameInput.style.display="block";
  gameContent.style.display="block";
  gameInput.focus();
}else{
  type("‚ùå Wrong password.");
}
this.value="";
}
});

// GAME VARIABLES
let xp=40, level=1, hp=100;
let bossMode=false;
let bossNames=["Void Emperor","Cyber Wraith","Neon Overlord","Shadow Glitch","The Buff Pigeon"];
let bossName="";
let bossHP=0;
let bossMaxHP=100;
let phaseTwo=false;
let rageMode=false;
let currentAnswer=0;

// UPDATE BARS
function updateXP(){
document.getElementById("xpBar").style.width=xp+"%";
document.getElementById("xpText").innerText=xp+"%";
}
function updateHP(){
document.getElementById("hpBar").style.width=hp+"%";
document.getElementById("hpText").innerText=hp;
}
function updateBoss(){
if(bossHP<0) bossHP=0;
let percent=(bossHP/bossMaxHP)*100;
document.getElementById("bossBar").style.width=percent+"%";
document.getElementById("bossHPText").innerText=bossHP;

if(!phaseTwo && bossHP<=bossMaxHP/2){
phaseTwo=true;
type("‚ö† PHASE 2 ACTIVATED");
}
if(!rageMode && bossHP<=bossMaxHP/4){
rageMode=true;
type("üî• RAGE MODE ACTIVATED");
}
if(bossName==="The Buff Pigeon" && bossHP<=bossMaxHP/2 && !rageMode){
type("üïä TRUE FORM AWAKENED");
bossMaxHP+=100;
bossHP+=100;
rageMode=true;
}
}

// START BOSS
function startBoss(){
bossMode=true;
phaseTwo=false;
rageMode=false;
bossName=bossNames[Math.floor(Math.random()*bossNames.length)];
bossMaxHP=100+(level*20);
bossHP=bossMaxHP;
document.getElementById("bossBarBox").style.display="block";
updateBoss();
type("üö® FINAL BOSS: "+bossName);
generate();
}

// GENERATE MATH
function generate(){
let a=Math.floor(Math.random()*level*5)+1;
let b=Math.floor(Math.random()*level*5)+1;
currentAnswer=a+b;
type(a+" + "+b+" = ?");
}

// HANDLE INPUT
gameInput.addEventListener("keydown",function(e){
if(e.key==="Enter"){
e.preventDefault();
let cmd=gameInput.value.trim().toLowerCase();

if(cmd==="boss"){startBoss();}
else if(cmd==="help"){type("Commands: boss, help");}
else if(bossMode){check(Number(cmd));}
else{type("Unknown command.");}

gameInput.value="";
}
});

// CHECK ANSWER
function check(val){
if(val===currentAnswer){

let dmg=20;
if(phaseTwo)dmg+=10;
if(rageMode)dmg+=15;

bossHP-=dmg;
type("You dealt "+dmg+" damage!");
updateBoss();

if(bossHP>0){

// Heal chance
if(Math.random()<0.2){
let heal=Math.floor(bossMaxHP*0.08);
bossHP+=heal;
if(bossHP>bossMaxHP)bossHP=bossMaxHP;
type("Boss healed "+heal+" HP!");
updateBoss();
}

// Boss attacks back
let bossDamage=10+level*2;
if(phaseTwo)bossDamage+=5;
if(rageMode)bossDamage+=10;

hp-=bossDamage;
if(hp<0)hp=0;
type("Boss hit you for "+bossDamage+"!");
updateHP();

if(hp===0){
type("üíÄ You died.");
bossMode=false;
document.getElementById("bossBarBox").style.display="none";
return;
}

generate();

}else{
type("üî• BOSS DEFEATED!");
finalExplosion();
levelUp(100);
bossMode=false;
document.getElementById("bossBarBox").style.display="none";
}

}else{
type("Wrong answer!");
}
}

// LEVEL UP
function levelUp(amount){
xp+=amount;
if(xp>=100){
xp=0;
level++;
document.getElementById("levelText").innerText=level;
type("üéâ LEVEL "+level+"!");
}
updateXP();
}

// EXPLOSION
function finalExplosion(){
document.body.style.backgroundColor="#ff0000";
setTimeout(()=>{document.body.style.backgroundColor="#0F0F1A";},400);
type("üí• SYSTEM OVERRIDE COMPLETE");
}

updateXP();
updateHP();

</script>
</body>
</html>
